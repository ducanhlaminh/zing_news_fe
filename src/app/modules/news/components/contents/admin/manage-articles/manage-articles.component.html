<!-- <table>
      <tr>
            <th>
                  <span>ID</span>
                  <div [ngSwitch]="filterCurr.id">
                        <fa-icon
                              [icon]="faCaretDown"
                              *ngSwitchCase="'1'"
                        ></fa-icon>
                        <fa-icon
                              [icon]="faCaretUp"
                              *ngSwitchCase="'2'"
                        ></fa-icon>
                  </div>
            </th>
            <th>
                  <div class="header-name" (click)="filterFn('title')">
                        <span>Tên bài viết</span>
                        <div [ngSwitch]="filterCurr.title">
                              <fa-icon
                                    [icon]="faCaretDown"
                                    *ngSwitchCase="'1'"
                              ></fa-icon>
                              <fa-icon
                                    [icon]="faCaretUp"
                                    *ngSwitchCase="'2'"
                              ></fa-icon>
                        </div>
                  </div>
            </th>
            <th>
                  <div class="header-cate">
                        <span>Danh mục</span>
                  </div>
            </th>
            <th>
                  <div class="header-view" (click)="filterFn('views')">
                        <span>Views</span>
                        <div [ngSwitch]="filterCurr.views">
                              <fa-icon
                                    [icon]="faCaretDown"
                                    *ngSwitchCase="'1'"
                              ></fa-icon>
                              <fa-icon
                                    [icon]="faCaretUp"
                                    *ngSwitchCase="'2'"
                              ></fa-icon>
                        </div>
                  </div>
            </th>
            <th>
                  <div class="header-slug" (click)="filterFn('slug')">
                        <span>Đường dẫn</span>
                        <div [ngSwitch]="filterCurr.slug">
                              <fa-icon
                                    [icon]="faCaretDown"
                                    *ngSwitchCase="'1'"
                              ></fa-icon>
                              <fa-icon
                                    [icon]="faCaretUp"
                                    *ngSwitchCase="'2'"
                              ></fa-icon>
                        </div>
                  </div>
            </th>
            <th>
                  <div class="header-slug" (click)="filterFn('status')">
                        <span>Trạng thái</span>
                        <div [ngSwitch]="filterCurr.status">
                              <fa-icon
                                    [icon]="faCaretDown"
                                    *ngSwitchCase="'1'"
                              ></fa-icon>
                              <fa-icon
                                    [icon]="faCaretUp"
                                    *ngSwitchCase="'2'"
                              ></fa-icon>
                        </div>
                  </div>
            </th>
            <th>
                  <div
                        class="header-date-published"
                        (click)="filterFn('publishAt')"
                  >
                        <span>Ngày tạo</span>
                        <div [ngSwitch]="filterCurr.publishAt">
                              <fa-icon
                                    [icon]="faCaretDown"
                                    *ngSwitchCase="'1'"
                              ></fa-icon>
                              <fa-icon
                                    [icon]="faCaretUp"
                                    *ngSwitchCase="'2'"
                              ></fa-icon>
                        </div>
                  </div>
            </th>
            <th>
                  <div
                        class="header-date-published"
                        (click)="filterFn('publishAt')"
                  >
                        <span>Ngày cập nhật</span>
                        <div [ngSwitch]="filterCurr.publishAt">
                              <fa-icon
                                    [icon]="faCaretDown"
                                    *ngSwitchCase="'1'"
                              ></fa-icon>
                              <fa-icon
                                    [icon]="faCaretUp"
                                    *ngSwitchCase="'2'"
                              ></fa-icon>
                        </div>
                  </div>
            </th>
            <th></th>
      </tr>
      <ng-container *ngFor="let item of articles; let i = index">
            <tr class="" [ngClass]="{ selected: item.opened }">
                  <td class="item-stt">
                        <div class="icon">
                              {{ item.id }}
                        </div>
                  </td>
                  <td class="item-name">
                        <span>{{ item?.title }}</span>
                  </td>
                  <td class="item-cate">
                        <span>{{
                              item?.new_articles_categories[0]?.category?.name
                        }}</span>
                  </td>
                  <td class="item-view">
                        <span>{{ item.views }}</span>
                  </td>
                  <td class="item-slug">
                        <span>{{ item.slug }}</span>
                  </td>
                  <td class="item-status">
                        <span
                              [class]="
                                    item.status === 1
                                          ? 'success'
                                          : item.status === 0
                                          ? 'pending'
                                          : ''
                              "
                              >{{
                                    item.status === 1
                                          ? "Xuất bản"
                                          : item.status === 0
                                          ? "Đang chờ"
                                          : "Hủy Bỏ"
                              }}</span
                        >
                  </td>
                  <td class="item-date-published">
                        <span>{{ item.createdAt | datePipe }}</span>
                  </td>
                  <td class="item-date-created">
                        <span>{{ item.createdAt | datePipe }}</span>
                  </td>
                  <td class="item-edit">
                        <button
                              mat-icon-button
                              [matMenuTriggerFor]="menu"
                              aria-label="Example icon-button with a menu"
                        >
                              <fa-icon [icon]="faEllipsisVertical"></fa-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                              <button
                                    mat-menu-item
                                    (click)="deleteArticle(item.id)"
                              >
                                    <span>Xóa</span>
                              </button>
                              <button mat-menu-item (click)="openDialog(item)">
                                    <span>Cập nhật</span>
                              </button>
                              <button
                                    mat-menu-item
                                    (click)="
                                          item.status === 0
                                                ? publishedArticle(item.id)
                                                : unPublishedArticle(item.id)
                                    "
                              >
                                    <span>{{
                                          item.status === 1
                                                ? "Thu hồi"
                                                : "Duyệt"
                                    }}</span>
                              </button>
                        </mat-menu>
                  </td>
            </tr>
      </ng-container>
</table>
<mat-paginator
      #paginator
      class="demo-paginator"
      aria-label="Select page"
      [length]="length"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      (page)="handlePageEvent($event)"
>
</mat-paginator>
<div class="layout">
      <div class="layout-header" [ngClass]="{ selected: show.hotCate }">
            <h2>
                  Xét bài viết nổi bật <small>( Danh mục )</small>
                  <button mat-icon-button color="primary">
                        <fa-icon
                              [icon]="faCircleInfo"
                              class="icon-close"
                        ></fa-icon>
                  </button>
            </h2>
            <button
                  mat-mini-fab
                  color="primary"
                  aria-label="Example icon button with a home icon"
                  (click)="show.hotCate = !show.hotCate"
            >
                  <fa-icon [icon]="show.hotCate ? faXmark : faEdit"></fa-icon>
            </button>
      </div>

      <div class="layout-content" *ngIf="show.hotCate">
            <div class="form">
                  <form [formGroup]="myForm2">
                        <mat-form-field class="example-full-width input">
                              <mat-label>Tên danh mục</mat-label>
                              <mat-select
                                    (selectionChange)="onChangeCate($event)"
                                    formControlName="category"
                              >
                                    <mat-option
                                          [value]="item"
                                          *ngFor="let item of optionCategories"
                                    >
                                          {{ item.name }}
                                    </mat-option>
                              </mat-select>
                        </mat-form-field>
                        <mat-form-field class="example-full-width input">
                              <mat-label>Tên bài viết</mat-label>
                              <input
                                    type="text"
                                    matInput
                                    formControlName="article"
                                    [matAutocomplete]="auto"
                              />
                              <mat-error *ngIf="!myForm2.get('article')?.valid"
                                    >You must enter a value</mat-error
                              >
                              <mat-autocomplete
                                    #auto="matAutocomplete"
                                    [displayWith]="getOption2Text"
                              >
                                    <mat-option
                                          *ngFor="let item of option2"
                                          [value]="item"
                                    >
                                          {{ item?.new_article.title }}
                                    </mat-option>
                              </mat-autocomplete>
                        </mat-form-field>

                        <mat-form-field class="example-full-width input">
                              <mat-label
                                    >Vị trí muốn đặt trong bố cục</mat-label
                              >
                              <input
                                    type="number"
                                    matInput
                                    formControlName="position"
                              />
                              <mat-error *ngIf="!myForm.get('position')?.valid"
                                    >You must enter a value</mat-error
                              >
                        </mat-form-field>
                        <div
                              class="groupBtn"
                              *ngIf="updateHotCate; else updateBtnCate"
                        >
                              <button
                                    mat-raised-button
                                    color="primary"
                                    (click)="createHotCateArticles()"
                              >
                                    Xác nhận
                              </button>
                        </div>
                  </form>
            </div>
            <div class="img-example">
                  <table>
                        <tr>
                              <th>Vị trí</th>
                              <th>Tên bài viết</th>
                              <th></th>
                        </tr>
                        <tr
                              *ngFor="
                                    let item of listHotCateArticles?.new_articles_hot_categories;
                                    index as idx
                              "
                              class="item-hot-articles"
                        >
                              <td>
                                    {{ item.position }}
                              </td>
                              <td>
                                    {{ item?.new_article?.title }}
                              </td>
                              <td>
                                    <button
                                          mat-icon-button
                                          [matMenuTriggerFor]="menu"
                                          aria-label="Example icon-button with a menu"
                                    >
                                          <fa-icon
                                                [icon]="faEllipsisVertical"
                                          ></fa-icon>
                                    </button>
                                    <mat-menu #menu="matMenu">
                                          <button
                                                mat-menu-item
                                                (click)="deleteHotCate(item)"
                                          >
                                                <span>Xóa</span>
                                          </button>
                                          <button
                                                mat-menu-item
                                                (click)="updateItem2(item)"
                                          >
                                                <span>Cập nhật</span>
                                          </button>
                                    </mat-menu>
                              </td>
                        </tr>
                  </table>
            </div>
      </div>
</div>
<div class="layout">
      <div class="layout-header" [ngClass]="{ selected: show.hotMain }">
            <h2>
                  Xét bài viết nổi bật <small>( Trang chủ )</small>
                  <button mat-icon-button color="primary">
                        <fa-icon
                              [icon]="faCircleInfo"
                              class="icon-close"
                        ></fa-icon>
                  </button>
            </h2>
            <button
                  mat-mini-fab
                  color="primary"
                  aria-label="Example icon button with a home icon"
                  (click)="show.hotMain = !show.hotMain"
            >
                  <fa-icon [icon]="show.hotMain ? faXmark : faEdit"></fa-icon>
            </button>
      </div>
      <div class="layout-content" *ngIf="show.hotMain">
            <div class="form">
                  <form
                        action=""
                        [formGroup]="myForm"
                        (submit)="createHotArticle()"
                  >
                        <mat-form-field class="example-full-width input">
                              <mat-label>Tên bài viết</mat-label>
                              <input
                                    type="text"
                                    matInput
                                    formControlName="nameArticle"
                                    [matAutocomplete]="auto1"
                              />
                              <mat-error
                                    *ngIf="!myForm.get('nameArticle')?.valid"
                                    >You must enter a value</mat-error
                              >
                              <mat-autocomplete
                                    #auto1="matAutocomplete"
                                    [displayWith]="getOptionText"
                              >
                                    <mat-option
                                          *ngFor="let item of option"
                                          [value]="item"
                                    >
                                          {{ item?.title }}
                                    </mat-option>
                              </mat-autocomplete>
                        </mat-form-field>
                        <mat-form-field class="example-full-width input">
                              <mat-label
                                    >Vị trí muốn đặt trong bộ cục</mat-label
                              >
                              <input
                                    type="number"
                                    matInput
                                    formControlName="position"
                              />
                              <mat-error *ngIf="!myForm.get('position')?.valid"
                                    >You must enter a value</mat-error
                              >
                        </mat-form-field>
                        <div
                              class="groupBtn"
                              *ngIf="update; else updateBtnMain"
                        >
                              <button
                                    mat-raised-button
                                    color="primary"
                                    type="submit"
                              >
                                    Xác nhận
                              </button>
                        </div>
                  </form>
            </div>
            <div class="img-example">
                  <table>
                        <tr>
                              <th>Vị trí</th>
                              <th>Tên bài viết</th>
                              <th></th>
                        </tr>
                        <tr
                              *ngFor="
                                    let item of listHotArticles.hot_news
                                          ?.hot_main;
                                    index as idx
                              "
                              class="item-hot-articles"
                        >
                              <td>
                                    {{ item.position }}
                              </td>
                              <td>
                                    {{ item?.new_article?.title }}
                              </td>
                              <td>
                                    <button
                                          mat-icon-button
                                          [matMenuTriggerFor]="menu"
                                          aria-label="Example icon-button with a menu"
                                    >
                                          <fa-icon
                                                [icon]="faEllipsisVertical"
                                          ></fa-icon>
                                    </button>
                                    <mat-menu #menu="matMenu">
                                          <button
                                                mat-menu-item
                                                (click)="
                                                      deleteHotMain(
                                                            item.article_id,
                                                            item.position
                                                      )
                                                "
                                          >
                                                <span>Xóa</span>
                                          </button>
                                          <button
                                                mat-menu-item
                                                (click)="updateItem(item)"
                                          >
                                                <span>Cập nhật</span>
                                          </button>
                                    </mat-menu>
                              </td>
                        </tr>
                  </table>
            </div>
      </div>
</div>

<ng-template #updateBtnMain>
      <div class="groupBtn">
            <button mat-raised-button color="primary" (click)="updateHot()">
                  Cập nhật
            </button>
            <button mat-raised-button color="primary" (click)="cancel()">
                  Hủy bỏ
            </button>
      </div>
</ng-template>
<ng-template #updateBtnCate>
      <div class="groupBtn">
            <button
                  mat-raised-button
                  color="primary"
                  (click)="updateHotCateArticle()"
            >
                  Cập nhật
            </button>
            <button mat-raised-button color="primary" (click)="cancel2()">
                  Hủy bỏ
            </button>
      </div>
</ng-template> -->
<div class="title">
      <h2>Bài viết</h2>
      <button class="btn-create" [routerLink]="['/', 'admin', 'tao-bai-viet']">
            <mat-icon class="icon">add_to_photos</mat-icon>
            <span>Viết bài viết mới</span>
      </button>
</div>
<div>
      <div class="filter">
            <button
                  class="btn-toggle"
                  [matBadge]="length"
                  matBadgeColor="primary"
                  [matBadgeHidden]="
                        selectedStatus === 2 || selectedStatus === 3
                  "
                  [ngClass]="{ 'selected-filter': selectedStatus === 1 }"
                  (click)="this.formFilter.patchValue({
                        status: null,
                      });this.selectedStatus = 1;this.getArticles()"
            >
                  <span>Tất cả</span>
            </button>
            <button
                  class="btn-toggle"
                  [matBadge]="length"
                  matBadgeColor="primary"
                  [matBadgeHidden]="
                        selectedStatus === 1 || selectedStatus === 3
                  "
                  [ngClass]="{ 'selected-filter': selectedStatus === 2 }"
                  (click)="this.formFilter.patchValue({
                  status: 1,
                });this.selectedStatus = 2; this.getArticles()"
            >
                  <span>Đã xuất bản</span>
            </button>
            <button
                  class="btn-toggle"
                  [matBadge]="length"
                  matBadgeColor="primary"
                  [matBadgeHidden]="
                        selectedStatus === 2 || selectedStatus === 1
                  "
                  [ngClass]="{ 'selected-filter': selectedStatus === 3 }"
                  (click)="
                        this.formFilter.patchValue({
                              status: 0
                        });
                        this.selectedStatus = 3;
                        this.getArticles()
                  "
            >
                  <span>Bản nháp</span>
            </button>
      </div>
      <div class="filter-bottom">
            <div class="container-action">
                  <div class="action">
                        <select [(ngModel)]="selectedAction">
                              <option value="1">Hành động</option>
                              <option value="2">Xóa</option>
                              <option value="3">Xuất bản</option>
                              <option value="4">Thu hồi</option>
                        </select>
                        <button
                              class="btn-action btn-filter"
                              (click)="actionFn(selectedAction)"
                              [disabled]="selectedAction === '1'"
                        >
                              <span>Áp dụng</span>
                        </button>
                  </div>
                  <form [formGroup]="formFilter" class="action">
                        <select formControlName="category_id">
                              <option selected="selected" value="">
                                    Chuyên mục
                              </option>
                              <option
                                    [value]="item.id"
                                    *ngFor="let item of optionCategories"
                              >
                                    {{ item.name }}
                              </option>
                        </select>

                        <button
                              class="btn-action btn-filter"
                              (click)="getArticles()"
                        >
                              <span>Lọc</span>
                        </button>
                  </form>
            </div>

            <form [formGroup]="formFilter" class="search">
                  <input
                        type="text"
                        formControlName="title"
                        placeholder="Tiêu đề bài viết"
                  />
                  <button class="btn-create" (click)="getArticles()">
                        <span>Tìm bài viết</span>
                  </button>
            </form>
      </div>
</div>
<table>
      <tr>
            <th class="select-all">
                  <input
                        type="checkbox"
                        name=""
                        id=""
                        (change)="checkAllFn($event)"
                        #checkAll
                  />
            </th>
            <th>
                  <div class="header-name">
                        <span>Tên bài viết</span>
                        <fa-icon [icon]="faSort"></fa-icon>
                  </div>
            </th>
            <th>
                  <div class="header-view">
                        <span>Tác giả</span>
                  </div>
            </th>
            <th>
                  <div class="header-cate">
                        <span>Chuyên mục</span>
                  </div>
            </th>
            <th>
                  <div class="header-view">
                        <span>Lượt đọc</span>
                        <fa-icon [icon]="faSort"></fa-icon>
                  </div>
            </th>

            <th>
                  <div class="header-date-published">
                        <span>Thời gian</span>
                  </div>
            </th>
            <th></th>
      </tr>
      <ng-container *ngFor="let item of articles; let i = index">
            <ng-container *ngIf="!item.edit; else editQuick">
                  <tr class="" [ngClass]="{ selected: item.opened }">
                        <td class="item-stt">
                              <div class="">
                                    <input
                                          type="checkbox"
                                          name=""
                                          id=""
                                          [(ngModel)]="item.selected"
                                          (ngModelChange)="changeSelected()"
                                    />
                              </div>
                        </td>
                        <td class="item-name">
                              <div class="title-status">
                                    <p>{{ item?.title }}</p>
                                    <div
                                          class="pending"
                                          *ngIf="item.status === 0"
                                    >
                                          Bản nháp
                                    </div>
                              </div>

                              <div class="">
                                    <small
                                          [routerLink]="[
                                                '/admin/bai-viet/',
                                                'chinh-sua-bai-viet',
                                                item.slug,
                                                item.slug_crc
                                          ]"
                                          >Chỉnh sửa</small
                                    >
                                    <small
                                          class="update-item"
                                          (click)="open(item)"
                                          >Sửa nhanh</small
                                    >
                                    <small
                                          (click)="deleteItem(item)"
                                          class="delete-item"
                                          >Thùng rác</small
                                    >
                                    <small (click)="viewDetail(item)"
                                          >Xem</small
                                    >
                              </div>
                        </td>
                        <td class="item-cate"></td>
                        <td class="item-cate">
                              <span>{{
                                    item?.new_articles_categories[0]?.category
                                          ?.name
                              }}</span>
                        </td>
                        <td class="item-view">
                              <span>{{ item.views }}</span>
                        </td>
                        <td class="item-date-published">
                              <b>
                                    {{
                                          item.status === 1
                                                ? "Đã xuất bản"
                                                : "Lần sửa gần nhất"
                                    }}
                              </b>

                              <span>{{ item | datePipe }}</span>
                        </td>
                  </tr>
            </ng-container>
      </ng-container>
</table>
<mat-paginator
      #paginator
      class="demo-paginator"
      aria-label="Select page"
      [length]="length"
      [pageSize]="pageSize"
      [pageIndex]="pageIndex"
      (page)="handlePageEvent($event)"
>
</mat-paginator>
<ngx-loading [show]="true" *ngIf="loading"></ngx-loading>
<ng-template #editQuick>
      <tr>
            <td colspan="7" class="edit-quick">
                  <form [formGroup]="formEdit">
                        <h4>SỬA NHANH</h4>
                        <div class="container-edit">
                              <div class="title-slug">
                                    <div class="edit-title">
                                          <label for="title">Tiêu đề</label>
                                          <input
                                                type="text"
                                                id="title"
                                                value=""
                                                formControlName="title"
                                          />
                                    </div>
                                    <div class="edit-slug">
                                          <label for="slug">Đường dẫn</label>
                                          <input
                                                type="text"
                                                id="slug"
                                                name=""
                                                value=""
                                                formControlName="slug"
                                          />
                                    </div>
                              </div>
                              <div class="category-status">
                                    <div class="edit-title">
                                          <label for="">Chuyên mục</label>
                                          <select formControlName="category_id">
                                                <option
                                                      [value]="item.id"
                                                      *ngFor="
                                                            let item of optionCategories
                                                      "
                                                >
                                                      {{ item.name }}
                                                </option>
                                          </select>
                                    </div>
                                    <div class="edit-slug">
                                          <label for="">Trạng thái</label>

                                          <select
                                                name=""
                                                id=""
                                                formControlName="status"
                                          >
                                                <option
                                                      selected="selected"
                                                      value=""
                                                >
                                                      Chuyên mục
                                                </option>
                                                <option
                                                      [value]="item.status"
                                                      *ngFor="
                                                            let item of statusOptions
                                                      "
                                                >
                                                      {{ item.name }}
                                                </option>
                                          </select>
                                    </div>
                              </div>
                        </div>
                        <div class="container-btn">
                              <button
                                    class="btn-create"
                                    (click)="submitUpdate()"
                              >
                                    Cập nhật
                              </button>
                              <button class="btn-cancel" (click)="close()">
                                    Hủy
                              </button>
                        </div>
                  </form>
            </td>
      </tr>
</ng-template>
